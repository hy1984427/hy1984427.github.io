<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Test &amp; testing &amp; tester</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Huang Yong&apos;s personal blogs about testing.">
<meta property="og:type" content="website">
<meta property="og:title" content="Test &amp; testing &amp; tester">
<meta property="og:url" content="http://hy1984427.github.io/index.html">
<meta property="og:site_name" content="Test &amp; testing &amp; tester">
<meta property="og:description" content="Huang Yong&apos;s personal blogs about testing.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Test &amp; testing &amp; tester">
<meta name="twitter:description" content="Huang Yong&apos;s personal blogs about testing.">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="/webfonts/ptserif/main.css" rel='stylesheet' type='text/css'>
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', '73216141', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      <a id="logo" class="logo" href="/"></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/AboutMe.html">About</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hy1984427.github.io"></form>
        </div>
      </nav>
    </div>
  </div>
</header>
    <section id="main" class="outer">
      <article id="post-How_To_Measure_The_Success_Of_A_Delivery_Project_In_ThoughtWorks_CN" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/20/How_To_Measure_The_Success_Of_A_Delivery_Project_In_ThoughtWorks_CN/">在ThoughtWroks内部，我们如何度量交付项目</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/12/20/How_To_Measure_The_Success_Of_A_Delivery_Project_In_ThoughtWorks_CN/" class="article-date">
  <time datetime="2018-12-19T13:00:00.000Z" itemprop="datePublished">2018-12-20</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Measurement/">Measurement</a><span>></span><a class="article-category-link" href="/categories/Measurement/Project-Management/">Project Management</a><span>></span><a class="article-category-link" href="/categories/Measurement/Project-Management/ThoughtWorks/">ThoughtWorks</a>
  </div>


      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>度量</strong>从来就不是件容易的事，因为我们想通过度量得到的并不仅仅是数据和表格，而是激励团队追求更高目标的动力。</p>
<p>软件项目的度量通常会分为两种，一种是针对产品的度量，一种是针对项目的度量。</p>
<p>之所以这么区分是因为产品的度量在不同的公司之间通常是一致的，不管它们是否使用敏捷开发模式。产品的度量一般包含以下内容：</p>
<ul>
<li><p>线上Bug数和严重等级</p>
</li>
<li><p>用户评分</p>
</li>
<li><p>用户粘性：例如跳出率（Bounce Rate），留存率（Retention Rate），转化率（Conversion Rate），单次使用时长（Duration），使用间隔（Interval）等；</p>
</li>
<li><p>用户数量：例如新增用户数（New Users），活跃用户数（Active Users），升级用户数（Updated Users）等；</p>
</li>
<li><p>访问量：例如页面浏览量（Page View)，独立访问者（Unique Visitor），访问数（Visit）等；</p>
</li>
<li><p>利润：例如每用户平均收益（Average Revenue Per User, ARPU），每付费用户平均收益（Average Revenue Per Paid User, ARPPU），月付费率（Monthly Payment Ratio, MPR），生命周期价值（Life Time Value, LTV）等。</p>
</li>
</ul>
<p>这些度量都是数据驱动的，因此也更客观。</p>
<p>项目的度量就并非如此了。而且项目的度量也包含了两方面的度量：</p>
<ol>
<li>我们如何评价项目组？</li>
<li>我们如何评价独立的项目成员？</li>
</ol>
<p><strong>传统上</strong>我们会使用诸如KPI和ROI（投入产出比）来度量项目组，用KPI以及管理者的意见来度量个人的贡献。</p>
<p><strong>在敏捷的环境中</strong>，尤其是像ThoughtWorks这样没有自己产品而是为客户提供专业服务的公司里，对产品和对项目这两方面的度量就融合在一起了。</p>
<ul>
<li><p>首先，<strong>度量项目的指标被合并进我们如何度量项目中</strong>，而不是像在产品公司中，这两者是分离的。也就是说，如果产品的度量达到或者超出客户的期望，团队就能在客户满意度这一方面的度量中表现突出。因此，项目组受此驱动，自然会持续关注产品的各项指标，并尽力把这些指标集成进CI流水线和诸如NewRelic的各种监测和分析平台中。</p>
<p>  同时，<strong>项目组也会聚焦于向客户交付（对于终端用户，对于客户和客户公司的）价值</strong>，以便提高客户满意度。当要开发某一特性时，项目团队总是不急于着手实现功能，而是试图找出特性需要解决的问题和根因，特性完成时交付的各种价值，再集思广益寻求更好的解决办法从而使客户的ROI更高。这种方法促使每个团队成员在日常工作中自己思考自己做的事情给产品和团队带来的价值，更有效地选择和处理高价值和高优先级的事情，而不是只关注于手里是否有活，自己是否显得很忙而不考虑产品。</p>
</li>
<li><p>其次，<strong>客户关系对于度量项目也至关重要</strong>。这并不是说ThoughtWorks会不假思索地接受所有的客户请求，而是根据我们的经验和专业性给出客户最好的解决方案，哪怕这可能会和客户因为理念/想法不一致而产生冲突。因为我们相信，本着对客户负责的态度和客户进行沟通，协调和平衡短期效益和长期受益从而达成共识要比唯唯诺诺更能给客户带来价值。</p>
</li>
<li><p>再次，<strong>ROI和利润仍然是评价项目时重要的一环</strong>。每个公司最基本的需求就是生存，而‘<strong>合理的</strong>’利润才能保持公司的问题发展。为什么我们在这里要提‘合理的’利润而不是越高越好呢？因为追求高利润会导致在别的方面（下面会提到）做出妥协，所以为了更方面的平衡，我们只会追求‘合理的’利润。</p>
</li>
<li><p>然后，<strong>对客户的影响力也是度量关注的一个要点</strong>。多数情况下，之所以客户选择ThoughtWorks并不单纯想让我们交付一个产品或者功能，更重要的是希望我们能通过协作开发来提升客户团队的能力，引入新的思维、技术趋势和技能。为了达到这个目标，项目团队通常会定期举行各种分享活动，并通过结对和只是分享等形式影响更多人。因此，对影响力的度量也被当作是对这些活动的反馈而被包含近项目度量中。</p>
</li>
<li><p>此外，<strong>每个团队成员的满意程度也是项目度量的核心标准之一</strong>。纵然让项目组种每个人都开心耗时耗力，可是只有这么做才能让每个人都关注于技能的提升，做有挑战的事情，从而对产品贡献更多，工作也会更有效率。ThoughtWorks相信只有身心健康的团队和团队成员才能更高效和充满活力地完成各种充满挑战的项目。</p>
</li>
<li><p>还有，<strong>提升团队成员能力不仅是每个人的责任，也是项目组和ThoughtWorks关注的</strong>，因此也是项目度量的一个方面。只有当团队成员的能力越强，经验越多，才更有可能独立完成更有挑战的任务和项目，才会对客户和行业产生更深更广的影响。</p>
</li>
<li><p>最后，<strong>在项目度量中还会考虑通过产品和在项目本身的开发过程中，我们是否让世界变得更好了</strong>。ThoughtWorks希望通过我们在技术上的努力，让世界变得更平等更和谐，所以很多时候，为了追求这些美好的愿望，ThoughtWorks会舍弃那些更赚钱的项目而投身于公益类的项目中。</p>
</li>
</ul>
<p>总结一下，ThoughtWorks会从以下7个方面来度量一个交付项目：</p>
<ol>
<li>客户满意度和交付的价值</li>
<li>客户关系</li>
<li>利润</li>
<li>对客户的影响</li>
<li>团队成员满意度</li>
<li>团队成员的能力提升</li>
<li>社会公正</li>
</ol>
<p>如果你熟悉ThoughtWorks的3个支柱（<strong>支柱1</strong>:可持续的业务；<strong>支柱2</strong>:软件卓越；<strong>支柱3</strong>:社会和经济公正）的业务模式，你就会发现对于项目的度量恰恰反应了这种业务模式。上述度量中的1～3体现了支柱1:可持续的业务；度量中的4～6体现了支柱2:软件卓越；而度量中的7体现了支柱3:社会和经济公正。</p>
<p>在我看来，正如<strong>康威定律</strong>中所说“任何设计系统的组织，必然会产生以下设计结果：即其结构就是该组织沟通结构的写照。简单来说： 产品必然是其组织沟通结构的缩影。”，<strong>对项目的度量也必然是其商业模式和企业文化的缩影</strong>。</p>
<p>你的公司是如何来进行度量的呢？</p>

      
    </div>
    
    
  </div>
  
</article>








    
      <article id="post-What_I_Learnt_From_Interviews" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/13/What_I_Learnt_From_Interviews/">What I learnt from interviews</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/12/13/What_I_Learnt_From_Interviews/" class="article-date">
  <time datetime="2018-12-12T13:00:00.000Z" itemprop="datePublished">2018-12-13</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Interview/">Interview</a><span>></span><a class="article-category-link" href="/categories/Interview/ThoughtWorks/">ThoughtWorks</a>
  </div>


      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Interview</strong> is a two-edge sword to an interviewer:</p>
<ul>
<li><p>if you attend too many times, it would be a burden as it will take a lot of time;</p>
</li>
<li><p>if you don’t take part in it, the company will lack of adequate qualified employee, thus you will work to death, but no one can help you out.</p>
</li>
</ul>
<p>In this article, I will not talk about the technics we can use in the interview to find out a qualified co-worker, but something I learnt from the interviews which helps me to <strong>change my mindset</strong> and help me to use the time for interview wisely.</p>
<p>Many people are pleased when they are asked to join an interview as an interviewer for the first time, because they treat interview as a privilege of senior employee, while after some time, they think interview is just a waste of time since they just repeat themselves regardless of the background of the candidate.</p>
<p>Thus, the first thing we need to change in an interview is our mindset: we need to understand <strong>the benefits</strong> an interview can bring to us and to the company.</p>
<ul>
<li><p><strong>Find the qualified co-worker is the most obvious one</strong>.</p>
<p> It seems only the company would benefit from this, but if the candidate is supposed to join YOUR team, the interview becomes more important to you. You should know there is no solid team in which no one can leave, so it’s important to help yourself evaluate whether the candidate is the one you want to work with.</p>
</li>
<li><p><strong>Learn from the others</strong> can also happen in the interview.</p>
<p> It’s not only learning from your peer interviewer about their interview skills, their style and even their knowledge, but also from the candidate.</p>
<p> By definition, “An interview is a conversation where questions are asked and answers are given … between an interviewer and an interviewee.”</p>
<p> As we can see, interview is not a one-way conversation but a two-way communication, which requires both parties can share their understanding and experience around certain topic, rather than just letting the candidate ask questions at the end of the interview.</p>
<p> We all understand everyone is unique and has their own experience and knowledge, at the meanwhile, no one is perfect. Hence, we need to learn from everyone. The person who join the interview as an interviewee doesn’t mean they are inferior than the interviewer; so if you are a passionate learner, you won’t miss this opportunity. Sometimes, if you ask the candidate the real problem in your current project, they may help you to find a better solution!</p>
</li>
<li><p>Like ‘Learning by Teaching’, <strong>learning by interviewing</strong>.</p>
<p> <em>In the preparation</em>, you need to consolidate your knowledge for the questions you are going to ask; you also need to prepare for the questions the candidate is going to ask.</p>
<p> <em>In the interview</em>, you can learn from both your pair interviewer and the candidate.</p>
<p> <em>After the interview</em>, you can learn from the retro by yourself or with your pair, or from the feedbacks from your pair and even the candidate.</p>
</li>
<li><p>You can also <strong>practise and excel your skills</strong> in the interview.</p>
<p> There are lots of soft skills you can practise and improve: such as facilitation skills, communication skill and even summarization skill. The more you practise, the more expertise you will have.</p>
</li>
<li><p>Interview is also <strong>a propaganda</strong>.</p>
<p> In the interview, you will demonstrate the culture of the company and the way of working. You are the window through which the candidate can know the company.</p>
</li>
</ul>
<p>As above, interview is not a waste of time, but a medium for us to learn and improve at the mean time.</p>
<p>If we don’t think it’s a waste any more, how we can make it <strong>more efficient</strong> for our goals?</p>
<ul>
<li><p>Personally speaking, I prepared my set of questions for the interview, so that I won’t take a lot effort in the questions themselves but focused on the candidates and their experience to dig out questions in depth, which can lead the answers more detailed, meaningful and knowledgeable.</p>
</li>
<li><p>Also, before interview, I will go through the candidate’s resume to mark all the key points, such as key roles, changes and something may lead to an in-depth question, and also write down my assumptions, so that I can validate in the interview.</p>
</li>
<li><p>In the interview, I will put myself into the candidate’s situation in their narratives, think about my own actions, compare them to the candidate’s and then figure the cause of difference and learn how to improve after the interview.</p>
</li>
<li><p>After interview, I will plan my actions to improve according to the summary I written down in the interview. I will also ask my pair to give me feedback.</p>
</li>
</ul>
<p>Interview can be anything you want, according to how you see it. <strong>Don’t be a slave of interview, be the master of it!</strong></p>

      
    </div>
    
    
  </div>
  
</article>








    
      <article id="post-How_To_Measure_The_Success_Of_A_Delivery_Project_In_ThoughtWorks" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/06/How_To_Measure_The_Success_Of_A_Delivery_Project_In_ThoughtWorks/">How to measure the success of a delivery project in ThoughtWorks</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/12/06/How_To_Measure_The_Success_Of_A_Delivery_Project_In_ThoughtWorks/" class="article-date">
  <time datetime="2018-12-05T13:00:00.000Z" itemprop="datePublished">2018-12-06</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Measurement/">Measurement</a><span>></span><a class="article-category-link" href="/categories/Measurement/Project-Management/">Project Management</a><span>></span><a class="article-category-link" href="/categories/Measurement/Project-Management/ThoughtWorks/">ThoughtWorks</a>
  </div>


      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><strong>Measurement</strong> is never been an easy job. It’s not just about the metrics but measurement also acts as a motivation for the team to achieve a better goal.</p>
<p>There are two kinds of measurements commonly used: the measurement of a product and a project.</p>
<p>You may wonder why we separate it like this. It is because the measurement of a product is quite common in most companies, whether the product was developed in an Agile way or traditional way. Usually it includes following contents:</p>
<ul>
<li><p>Bugs found in production (with severity);</p>
</li>
<li><p>Customer Rating (if applicable);</p>
</li>
<li><p>Customer Engagement: e.g. bounce rate, retention rate, conversion rate, duration, interval;</p>
</li>
<li><p>Number of Users: e.g. active users, new users and updated users;</p>
</li>
<li><p>Visits: e.g. page view/PV, unique visitor/UV, total visits;</p>
</li>
<li><p>Revenue: e.g. average revenue per user/ARPU, average revenue per paid user/ARPPU, monthly payment ratio/MPR, lifetime value/LTV.</p>
</li>
</ul>
<p>All those measurements are data driven, thus they are objective.</p>
<p>But when it comes to measurement of a project, things are different. The measurement of a project combines two aspects:</p>
<ol>
<li><p>how do we review the project team?</p>
</li>
<li><p>how do we review each individual team member?</p>
</li>
</ol>
<p><strong>Traditionally</strong>, we use Key Performance Indicators (KPI) or Return on investment (ROI) to evaluate the team, using KPI and manager’s opinion to evaluate team members.</p>
<p><strong>In an Agile world</strong>, especially in a company like ThoughtWorks, which doesn’t have a product itself but delivers value to clients through product delivery, the measurements are combined.</p>
<ul>
<li><p>Firstly, <strong>the product success metrics are aggregated into how we measure the project</strong>; unlike the traditional way, the measurement of a product and the project to deliver it are separated. That is to say, if the measurement of the product met or went beyond the client’s expectation, the team will get a high client satisfaction score. Hence, the project team is continuously monitoring product metrics , mostly by integrating them into CI pipelines and analytical platform such as New Relic.</p>
<p>  In the meantime, <strong>the project team is also focused on delivering value to customers</strong> (end-user, stakeholders and the client’s company), which can also improve the client’s satisfaction. When implementing a feature, the team will always figure out the hidden problem to be solved and the value delivered when it’s done and then try to brainstorm all the possible solutions before actually working on it. This approach forces everyone to think about the value they bring to product and team in daily work, rather than just piling up an endless backlog and try to make themselves busy but never really think about the product.</p>
</li>
<li><p>Secondly, as part of the measurements, <strong>the client’s relationship is also taken into consideration.</strong> In this aspect, ThoughtWorks expects the team to provide the best solutions based on the experience and expertise, even if this does not align with what the client originally asked for. This benefits the relationship in the long run and from a big picture because the client understands that we are focused on the things that bring them value.</p>
</li>
<li><p>Thirdly, <strong>ROI or margin also plays an important role in the review.</strong> Every company’s primary objective is to survive, so only ‘Reasonable’ margin can help the company to grow sustainably. Why does ThoughtWorks think that the margin should be ‘Reasonable’ rather than as much as possible? That’s due to the rest of aspects we need to think about in the review listed below and then do a trade-off.</p>
</li>
<li><p>Fourthly, <strong>the influence on client is also considered to be an important aspect in the review.</strong>  In most cases, ThoughtWorks is not only considered as a vendor to just deliver a product or a piece of work, but more importantly – leveraging the client’s team, bringing new thinking and technical expertise as well. To meet this expectation, usually the team conducts brown bag sessions, pair programming and knowledge sharing to influence more. As a result, measurement of influence is served as feedback to those actions.</p>
</li>
<li><p>Fifthly, <strong>the satisfaction of each team member is also a critical measurement among all the measurements.</strong> It takes great efforts to make everyone in the team happy, since everyone is eager to improve their own skills, to work on challenging tasks, to contribute more to the product, to work more efficiently, and, of course to not have to work overtime. This is why ThoughtWorks values health of both project and team members and believes it can bring more efficiency and energy to the team.</p>
</li>
<li><p>Sixthly, <strong>the leveraging of team members is important</strong> not just from team member’s personal perspective, but also as a company like ThoughtWorks. The more experience and expertise the employee has, the more challenge situation and project they can handle, thus the more influence on client and industry the company can have.</p>
</li>
<li><p>Last but not the least, <strong>how we change the world is also largely considered in the measurements.</strong> ThoughtWorks always gives the products and projects which can have more social and economic justice influence a high priority, even for sometimes, it means less profit.</p>
</li>
</ul>
<p><strong>In summary</strong>, ThoughtWorks assesses a delivery projects from 7 aspects:</p>
<ol>
<li>Client’s satisfaction and value delivered</li>
<li>Client Relationship</li>
<li>Margin</li>
<li>Influence on Client</li>
<li>Team members’ satisfaction</li>
<li>Leveraging of team</li>
<li>Social and Economic Justice</li>
</ol>
<p>If you are familiar with ThoughtWorks’ three pillars Business Model (<strong>Pillar 1</strong>: Sustainable Business; <strong>Pillar 2</strong>: Software Excellence; <strong>Pillar 3</strong>: Social and economic justice), you will find the measurements just reflect the business models. The measurements 1 to 3 are aligned with Pillar 1, 4 to 6 are aligned with pillar 2 and 7 is aligned with Pillar 3.</p>
<p>To my experience, just like in <strong>Conway’s law</strong>:” organizations which design systems … are constrained to produce designs which are copies of the communication structures of these organizations.”; an organization is constrained to produce design the measurements of a project which are copies of the business model and culture of that organization.</p>
<p>What are the measurements in your company?</p>

      
    </div>
    
    
  </div>
  
</article>








    
      <article id="post-Quick_Start_For_InSpec_and_ServerSpec_also_comparison_of_them" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/24/Quick_Start_For_InSpec_and_ServerSpec_also_comparison_of_them/">Quick start for InSpec and ServerSpec also comparison of them</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/11/24/Quick_Start_For_InSpec_and_ServerSpec_also_comparison_of_them/" class="article-date">
  <time datetime="2017-11-23T13:00:00.000Z" itemprop="datePublished">2017-11-24</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Testing/">Testing</a>
  </div>


      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="InSpec-and-ServerSpec-are-Infrastructure-Testing-tools-based-on-Ruby-InSpec-is-newly-added-into-ThoughtWorks-Tech-Radar"><a href="#InSpec-and-ServerSpec-are-Infrastructure-Testing-tools-based-on-Ruby-InSpec-is-newly-added-into-ThoughtWorks-Tech-Radar" class="headerlink" title="InSpec and ServerSpec are Infrastructure Testing tools based on Ruby. InSpec is newly added into ThoughtWorks Tech Radar."></a>InSpec and ServerSpec are Infrastructure Testing tools based on Ruby. InSpec is newly added into <a href="https://www.thoughtworks.com/radar" target="_blank" rel="external">ThoughtWorks Tech Radar</a>.</h5><h3 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite:"></a>Prerequisite:</h3><p>  RVM, Ruby (&gt;2.2) and rubygems should be installed.</p>
<h3 id="Get-Started-for-InSpec"><a href="#Get-Started-for-InSpec" class="headerlink" title="Get Started for InSpec:"></a>Get Started for InSpec:</h3><ol>
<li><p>Install InSpec.</p>
<p><code>gem install inspec</code></p>
</li>
<li><p>Write and run the InSpec script according to its <a href="https://www.inspec.io/docs/reference/resources/" target="_blank" rel="external">API document</a>.</p>
<p>You can reference the script  <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/sample_inspec.rb" target="_blank" rel="external">here</a>.</p>
<p>Using <code>inspec exec inspec.rb</code> to run and check the result.</p>
<p>As you can see the script is pretty much the same as the one we used for ServerSpec, you can reference that script <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/ServerSpec.zip" target="_blank" rel="external">here</a>. The instruction of running it is in <a href="http://hy1984427.github.io/2017/09/01/Qucik_Start_For_ServerSpec_and_TestInfra_also_comparison_of_them/">this article</a>.</p>
<p>And there is <a href="https://www.inspec.io/docs/reference/migration/" target="_blank" rel="external">another official article</a> talking about the migration from ServerSpec to InSpec (we can also see the differences of resources between the two).</p>
</li>
<li><p>To generate a json file as the test result, we run <code>inspec exec sample_inspec.rb --format json &gt;report</code>.</p>
<p>And it will generate the test result named “report” every time the test runs.</p>
</li>
</ol>
<h3 id="Comparison-between-InSpec-and-ServerSpec"><a href="#Comparison-between-InSpec-and-ServerSpec" class="headerlink" title="Comparison between InSpec and ServerSpec:"></a>Comparison between InSpec and ServerSpec:</h3><ul>
<li><p>InSpec has 98 types of resources but ServerSpec has only 41.</p>
</li>
<li><p>InSpec has more comprehensive documents, you can reference <a href="https://www.inspec.io/docs/" target="_blank" rel="external">here</a>, and it even has a series of <a href="https://www.inspec.io/tutorials/" target="_blank" rel="external">detailed tutorials</a>.</p>
</li>
</ul>
<p>In general, I would suggest to use InSpec for Infrastructure Testing in new projects.</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Comparison/">Comparison</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/InSpec/">InSpec</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Infrastructure-Testing/">Infrastructure Testing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Quick-Start/">Quick-Start</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ruby/">Ruby</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ServerSpec/">ServerSpec</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-Quick_Start_For_UI_tests_with_XCTest" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/24/Quick_Start_For_UI_tests_with_XCTest/">Quick start for UI tests with XCTest</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/11/24/Quick_Start_For_UI_tests_with_XCTest/" class="article-date">
  <time datetime="2017-11-23T13:00:00.000Z" itemprop="datePublished">2017-11-24</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Testing/">Testing</a>
  </div>


      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="XCTest-is-introduced-by-XCode-5-for-iOS-7-but-until-XCode-8-with-iOS-10-XCTest-became-the-default-and-the-only-choice-if-you-want-to-conduct-UI-testing-the-previous-UIAutomation-is-deprecated-at-that-time"><a href="#XCTest-is-introduced-by-XCode-5-for-iOS-7-but-until-XCode-8-with-iOS-10-XCTest-became-the-default-and-the-only-choice-if-you-want-to-conduct-UI-testing-the-previous-UIAutomation-is-deprecated-at-that-time" class="headerlink" title="XCTest is introduced by XCode 5 for iOS 7, but until XCode 8 with iOS 10, XCTest became the default and the only choice if you want to conduct UI testing, the previous UIAutomation is deprecated at that time."></a>XCTest is introduced by XCode 5 for iOS 7, but until XCode 8 with iOS 10, XCTest became the default and the only choice if you want to conduct UI testing, the previous UIAutomation is deprecated at that time.</h5><h3 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite:"></a>Prerequisite:</h3><ul>
<li><p>XCode and XCode command line tools should be installed.</p>
</li>
<li><p>Download the sample XCOde project from <a href="https://developer.apple.com/library/content/samplecode/UICatalog/UIKitCatalogiOSCreatingandCustomizingUIKitControls.zip" target="_blank" rel="external">here</a>, unzip and open the Swift project.</p>
</li>
</ul>
<h3 id="Get-Started-for-XCTest"><a href="#Get-Started-for-XCTest" class="headerlink" title="Get Started for XCTest:"></a>Get Started for XCTest:</h3><ol>
<li><p>Add a new Target of iOS UI Testing through “File”-&gt;”New”-&gt;”Target…”-&gt;”iOS UI Testing Bundle”, and input all the required info.</p>
</li>
<li><p>Use the red dot (named “Record UI Test”) on the bottom to start recording, once finished, click it again to complete.</p>
</li>
<li><p>Add assertions to the ends of each scenarios, such as the script in the “UIKitCatalogUITests.swift” of <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/XCTestSample.zip" target="_blank" rel="external">XCTestSample.zip</a>.</p>
<p>For the detailed usage of assertions, you can reference to the “Test Assertions” in the <a href="https://developer.apple.com/documentation/xctest" target="_blank" rel="external">XCTest Topics</a>.</p>
</li>
<li><p>It’s hard to just check the text on some labels, so if we want to check it, we need to add value to identifier of the label, then in the testing script, using following lines:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let label=app<span class="selector-class">.staticTexts</span>[<span class="string">"label_identifier"</span>]</div><div class="line"><span class="function"><span class="title">XCTAssertEqual</span><span class="params">(label.label,<span class="string">"label_text"</span>)</span></span></div><div class="line"><span class="function"><span class="title">XCTAssert</span><span class="params">(app.staticTexts[<span class="string">"label_text"</span>].exists)</span></span></div></pre></td></tr></table></figure>
</li>
<li><p>If you want to know more usage of the XCTest, you can reference to <a href="https://github.com/joemasilotti/UI-Testing-Cheat-Sheet" target="_blank" rel="external">the Cheat Sheet</a>.</p>
</li>
</ol>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Quick-Start/">Quick-Start</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UI-Tests/">UI Tests</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/XCTest/">XCTest</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-Configure_ServerSpec_To_Run_Tests_Against_Multiple_Hosts" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/18/Configure_ServerSpec_To_Run_Tests_Against_Multiple_Hosts/">Configure ServerSpec to run tests against multiple hosts</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/09/18/Configure_ServerSpec_To_Run_Tests_Against_Multiple_Hosts/" class="article-date">
  <time datetime="2017-09-17T14:00:00.000Z" itemprop="datePublished">2017-09-18</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Testing/">Testing</a>
  </div>


      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="We-have-learnt-how-to-setup-tests-with-ServerSpec-in-Quick-start-for-ServerSpec-and-Testinfra-also-comparison-of-them-but-the-folder-structure-can-only-support-testing-against-one-host-In-the-real-world-we-need-to-reuse-the-tests-to-test-against-multiple-hosts-so-we-will-see-how-we-can-do-that"><a href="#We-have-learnt-how-to-setup-tests-with-ServerSpec-in-Quick-start-for-ServerSpec-and-Testinfra-also-comparison-of-them-but-the-folder-structure-can-only-support-testing-against-one-host-In-the-real-world-we-need-to-reuse-the-tests-to-test-against-multiple-hosts-so-we-will-see-how-we-can-do-that" class="headerlink" title="We have learnt how to setup tests with ServerSpec in Quick start for ServerSpec and Testinfra, also comparison of them, but the folder structure can only support testing against one host. In the real world, we need to reuse the tests to test against multiple hosts, so we will see how we can do that."></a>We have learnt how to setup tests with ServerSpec in <a href="http://hy1984427.github.io/2017/09/01/Qucik_Start_For_ServerSpec_and_TestInfra_also_comparison_of_them/">Quick start for ServerSpec and Testinfra, also comparison of them</a>, but the folder structure can only support testing against one host. In the real world, we need to reuse the tests to test against multiple hosts, so we will see how we can do that.</h5><h3 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite:"></a>Prerequisite:</h3><p>  ServerSpec setup is completed according to the steps in <a href="http://hy1984427.github.io/2017/09/01/Qucik_Start_For_ServerSpec_and_TestInfra_also_comparison_of_them/">Quick start for ServerSpec and Testinfra, also comparison of them</a>.</p>
<h3 id="Configure-ServerSpec-to-run-tests-against-multiple-hosts"><a href="#Configure-ServerSpec-to-run-tests-against-multiple-hosts" class="headerlink" title="Configure ServerSpec to run tests against multiple hosts:"></a>Configure ServerSpec to run tests against multiple hosts:</h3><p>  Actually we only need to change the Rakefile in the test folder. And its content should be changed to following:</p>
  <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'rake'</span></div><div class="line"><span class="keyword">require</span> <span class="string">'rspec/core/rake_task'</span></div><div class="line"></div><div class="line">hosts = <span class="string">%w(</span></div><div class="line">  host1</div><div class="line">  host2</div><div class="line">)</div><div class="line"></div><div class="line">task <span class="symbol">:spec</span> =&gt; <span class="string">'spec:all'</span></div><div class="line"></div><div class="line">namespace <span class="symbol">:spec</span> <span class="keyword">do</span></div><div class="line"></div><div class="line">  task <span class="symbol">:all</span> =&gt; hosts.map &#123;<span class="params">|h|</span> <span class="string">'spec:'</span> + h &#125;</div><div class="line">  hosts.each <span class="keyword">do</span> <span class="params">|host|</span></div><div class="line">    desc <span class="string">"Run serverspec to <span class="subst">#&#123;host&#125;</span>"</span></div><div class="line">    RSpec::Core::RakeTask.new(host) <span class="keyword">do</span> <span class="params">|t|</span></div><div class="line">      ENV[<span class="string">'TARGET_HOST'</span>] = host</div><div class="line">      t.pattern = <span class="string">"spec/&#123;host_server&#125;/*_spec.rb"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>  Please note, <code>host1</code> and <code>host2</code> are the hosts we would like to run our tests against, the reason we put <code>host_server</code> in above lines is because we have the folder named “host_server” in our test scripts structure.</p>
<p>  You can reference the script  <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/ServerSpecAdvanced.zip" target="_blank" rel="external">here</a>.</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Advanced/">Advanced</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Infrastructure-Testing/">Infrastructure Testing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Multiple-Hosts/">Multiple Hosts</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ruby/">Ruby</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ServerSpec/">ServerSpec</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-Integrate_ServerSpec_Testinfra_and_ZAP_with_CentOS_7_Minimal" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/07/Integrate_ServerSpec_Testinfra_and_ZAP_with_CentOS_7_Minimal/">Integrate ServerSpec, Testinfra and ZAP with CentOS 7 Minimal</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/09/07/Integrate_ServerSpec_Testinfra_and_ZAP_with_CentOS_7_Minimal/" class="article-date">
  <time datetime="2017-09-06T14:00:00.000Z" itemprop="datePublished">2017-09-07</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Testing/">Testing</a>
  </div>


      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="We-already-know-how-to-setup-tests-with-ServerSpec-and-Testinfra-in-Quick-start-for-ServerSpec-and-Testinfra-also-comparison-of-them-and-Quick-start-for-integrating-ZAP-into-CI-Now-let’s-see-how-to-integrate-them-with-CentOS-7-Minimal"><a href="#We-already-know-how-to-setup-tests-with-ServerSpec-and-Testinfra-in-Quick-start-for-ServerSpec-and-Testinfra-also-comparison-of-them-and-Quick-start-for-integrating-ZAP-into-CI-Now-let’s-see-how-to-integrate-them-with-CentOS-7-Minimal" class="headerlink" title="We already know how to setup tests with ServerSpec and Testinfra in Quick start for ServerSpec and Testinfra, also comparison of them and Quick start for integrating ZAP into CI. Now, let’s see how to integrate them with CentOS 7 Minimal."></a>We already know how to setup tests with ServerSpec and Testinfra in <a href="http://hy1984427.github.io/2017/09/01/Qucik_Start_For_ServerSpec_and_TestInfra_also_comparison_of_them/">Quick start for ServerSpec and Testinfra, also comparison of them</a> and <a href="http://hy1984427.github.io/2017/09/06/Qucik_Start_For_Integrating_ZAP_into_CI/">Quick start for integrating ZAP into CI</a>. Now, let’s see how to integrate them with CentOS 7 Minimal.</h5><h3 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite:"></a>Prerequisite:</h3><ol>
<li><p>Install CentOS 7 Minimal successfully with root user setup and login.</p>
</li>
<li><p>Enable network on CentOS 7 Minimal following <a href="https://lintut.com/how-to-setup-network-after-rhelcentos-7-minimal-installation/" target="_blank" rel="external">this article</a>.</p>
<p>The detailed steps are:</p>
<p>1) Open Network Manager through <code>nmtui</code>;</p>
<p>2) Choose “Edit connection” and press Enter (Use TAB button for choosing options);</p>
<p>3) Choose your network interfaces and click “Edit”;</p>
<p>4) Choose “Automatic” in “IPv4 CONFIGURATION” and check “Automatically connect” checkbox, then press “OK” to quit from Network Manager;</p>
<p>5) Reset network services through <code>service network restart</code>.</p>
</li>
<li><p>Adjust the screen resolution following <a href="https://superuser.com/questions/816528/with-centos-7-as-a-virtualbox-guest-on-a-mac-host-how-can-i-change-the-screen-r" target="_blank" rel="external">this article</a>.</p>
<p>The detailed steps are:</p>
<p>1) Edit GRUB file: <code>vi /etc/default/grub</code></p>
<p>2) Append <code>vga=792</code> to the line <code>GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=cl/root rd.lvm.lv=cl/swap rhgb quiet</code>,</p>
<p>and you will have <code>GRUB_CMDLINE_LINUX=&quot;crashkernel=auto rd.lvm.lv=cl/root rd.lvm.lv=cl/swap rhgb quiet vga=792</code>;</p>
<p><em>Check for the detailed <a href="#GRUB-VGA-Modes">GRUB VGA Modes</a>, or scroll down to the bottom of this article.</em></p>
<p>3) Add this change to GRUB configuration: <code>grub2-mkconfig -o /boot/grub2/grub.cfg</code></p>
<p>4) Reboot to take effect: <code>reboot</code>.</p>
</li>
<li><p>Add a Yum source and update.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">yum <span class="keyword">install</span> epel-<span class="keyword">release</span></div><div class="line">yum -y <span class="keyword">update</span></div></pre></td></tr></table></figure>
</li>
<li><p>Configure ssh key to connect server easily.</p>
<ul>
<li>Generate ssh key: <code>ssh-keygen -t rsa</code></li>
<li>Copy ssh public key to server: <code>ssh-copy-id -i ~/.ssh/id_rsa.pub username@server</code></li>
<li><p>Add following lines to ~/.ssh/config.</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Host<span class="built_in"> server</span></div><div class="line"> <span class="built_in"> User </span>username</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="Quick-start-for-ServerSpec"><a href="#Quick-start-for-ServerSpec" class="headerlink" title="Quick start for ServerSpec:"></a>Quick start for ServerSpec:</h3><ol>
<li><p>Install Ruby.</p>
<p><code>yum install ruby</code></p>
</li>
<li><p>Install RubyGems.</p>
<p><code>yum install rubygems</code></p>
</li>
<li><p>Install Rake.</p>
<p><code>gem install rake</code></p>
</li>
<li><p>Install ServerSpec.</p>
<p><code>gem install serverspec</code></p>
</li>
<li><p>Initial ServerSpec folder with basic settings. Please note the server will be set in this step.</p>
<p><code>serverspec-init</code></p>
</li>
<li><p>Write and run the ServerSpec script according to its <a href="http://serverspec.org/resource_types.html" target="_blank" rel="external">API document</a>.</p>
<p>You can reference the script  <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/ServerSpec.zip" target="_blank" rel="external">here</a>.</p>
<p>Using <code>rake spec</code> under the test folder to run and check the result.</p>
</li>
<li><p>To run specific test rather than the entire test suite.</p>
<p> Using <code>rake spec spec/host_server/sample_spec.rb</code> under the test folder to run and check the result.</p>
</li>
</ol>
<h3 id="Quick-Start-for-Testinfra"><a href="#Quick-Start-for-Testinfra" class="headerlink" title="Quick Start for Testinfra:"></a>Quick Start for Testinfra:</h3><ol>
<li><p>Python 2.7 is installed by default, so we just need to install Pip.</p>
<figure class="highlight plain"><figcaption><span>-y install python-pip</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install --upgrade pip</div></pre></td></tr></table></figure>
</li>
<li><p>Install Testinfra and Paramiko.</p>
<p><code>pip install testinfra</code><br><code>pip install paramiko</code></p>
</li>
<li><p>Write and run the Testinfra script according to its <a href="http://testinfra.readthedocs.io/en/latest/modules.html" target="_blank" rel="external">API document</a>.</p>
<p>You can reference the script  <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/testinfra_test.py" target="_blank" rel="external">here</a>.</p>
<p>Using <code>testinfra testinfra_test.py</code> to run and check the result.</p>
</li>
<li><p>Some useful arguments we can use to make the test result more clear.</p>
<p>Instead of using <code>testinfra testinfra_test.py</code> directly, we can add some arguments, such as <code>-q</code>, <code>-s</code>, <code>--disable-warnings</code> and <code>--junit-xml</code>.</p>
<ul>
<li>The argument <code>-q</code> will run Testinfra in quiet mode, with less info exposed</li>
<li>The argument <code>-s</code> will let Testinfra capture No pre-test info</li>
<li>The argument <code>--disable-warnings</code> will disable warnings during Testinfra runs</li>
<li>The argument <code>--junit-xml</code> will export Testinfra test result into a xml file</li>
</ul>
<p>After adding those arguments, the command should be look like <code>testinfra -q -s --disable-warnings testinfra_test.py --junit-xml=report.xml</code></p>
</li>
<li><p>Now we can run Testinfra against the server using <code>testinfra -q -s --disable-warnings --ssh-config=/Path/to/ssh/config --hosts=server testinfra_test.py --junit-xml=report.xml</code>.</p>
</li>
</ol>
<h3 id="Quick-Start-for-ZAP"><a href="#Quick-Start-for-ZAP" class="headerlink" title="Quick Start for ZAP:"></a>Quick Start for ZAP:</h3><ol>
<li><p>Install JDK.</p>
<p><code>yum install java-1.8.0-openjdk*</code></p>
</li>
<li><p>Download ZAP installation script.</p>
<p><code>wget https://github.com/zaproxy/zaproxy/releases/download/2.6.0/ZAP_2_6_0_unix.sh</code></p>
</li>
<li><p>Change permission of the installation script and execute it.</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chmod 777 ZAP_2_6_0_unix.<span class="keyword">sh</span></div><div class="line">./ZAP_2_6_0_unix.<span class="keyword">sh</span></div></pre></td></tr></table></figure>
</li>
<li><p>Install required libraries.</p>
<p>1) Install Selenium-WebDriver</p>
<p><code>gem install selenium-webdriver</code></p>
<p>2) Install IO</p>
<p><code>gem install io</code></p>
<p>3) Install Rest-Client</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">yum <span class="keyword">install</span> gcc-c++</div><div class="line">gem <span class="keyword">install</span> rest-<span class="keyword">client</span></div></pre></td></tr></table></figure>
<p>4) Install RSpec</p>
<p><code>gem install rspec</code></p>
<p>5) Install and configure the headless Firefox</p>
 <figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">yum -y install firefox Xvfb libXfont Xorg</div><div class="line">yum -y groupinstall <span class="string">"X Window System"</span> <span class="string">"Desktop"</span> <span class="string">"Fonts"</span> <span class="string">"General Purpose Desktop"</span></div><div class="line">Xvfb :99 -ac -screen 0 1280x1024x24 &amp;</div><div class="line"><span class="builtin-name">export</span> <span class="attribute">DISPLAY</span>=:99</div></pre></td></tr></table></figure>
<p>6) Download and setup geckodriver.</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">wget https://github.com/mozilla/geckodriver/releases/download/v0<span class="meta">.18</span><span class="meta">.0</span>/geckodriver-v0<span class="meta">.18</span><span class="meta">.0</span>-linux64.tar.gz</div><div class="line">tar -xvzf geckodriver-v0<span class="meta">.18</span><span class="meta">.0</span>-linux64.tar.gz</div><div class="line">mv geckodriver /usr/lib64</div></pre></td></tr></table></figure>
<p>7) Add following lines to ~/.bash_profile.</p>
<p> <code>$PATH=$PATH:/usr/lib64</code></p>
<p> And run <code>source ~/.bash_profile</code>.</p>
<p>8) Alternatively, we can use Chromedriver:</p>
<p> i) Create a file called /etc/yum.repos.d/google-chrome.repo and add the following lines of code to it.</p>
   <figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="section">[google-chrome]</span></div><div class="line"><span class="attr">name</span>=google-chrome</div><div class="line"><span class="attr">baseurl</span>=http://dl.google.com/linux/chrome/rpm/stable/<span class="variable">$basearch</span></div><div class="line"><span class="attr">enabled</span>=<span class="number">1</span></div><div class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></div><div class="line"><span class="attr">gpgkey</span>=https://dl-ssl.google.com/linux/linux_signing_key.pub</div></pre></td></tr></table></figure>
<p> ii) Check whether the latest version available from the Google�s own repository using <code>yum info google-chrome-stable</code></p>
<p> iii) Update yum using ‘yum update’</p>
<p> ix) Install Chrome using <code>yum install google-chrome-stable unzip</code></p>
<p> x) Download Chromedriver using <code>wget https://chromedriver.storage.googleapis.com/2.32/chromedriver_linux64.zip</code></p>
<p> xi) Unzip Chromedriver using <code>unzip chromedriver_linux64.zip</code></p>
<p> xii) Move Chromedriver to a place in $PATH using <code>mv chromedriver bin/</code></p>
</li>
<li><p>Using <code>ruby add_assertions_to_check_zap_result.rb</code> to run and check the result.</p>
<p>You can reference the script  <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/add_assertions_to_check_zap_result.rb" target="_blank" rel="external">here</a>.</p>
</li>
</ol>
<h4 id="GRUB-VGA-Modes"><a href="#GRUB-VGA-Modes" class="headerlink" title="GRUB VGA Modes"></a><em>GRUB VGA Modes</em></h4><table>
<thead>
<tr>
<th style="text-align:center">Colour Depth</th>
<th style="text-align:center">640x480</th>
<th style="text-align:center">800x600</th>
<th style="text-align:center">1024x768</th>
<th style="text-align:center">1280x1024</th>
<th style="text-align:center">1400x1050</th>
<th style="text-align:center">1600x1200</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">8 (256)</td>
<td style="text-align:center">769</td>
<td style="text-align:center">771</td>
<td style="text-align:center">773</td>
<td style="text-align:center">775</td>
</tr>
<tr>
<td style="text-align:center">15 (32K)</td>
<td style="text-align:center">784</td>
<td style="text-align:center">787</td>
<td style="text-align:center">790</td>
<td style="text-align:center">793</td>
</tr>
<tr>
<td style="text-align:center">16 (65K)</td>
<td style="text-align:center">785</td>
<td style="text-align:center">788</td>
<td style="text-align:center">791</td>
<td style="text-align:center">794</td>
<td style="text-align:center">834</td>
<td style="text-align:center">884</td>
</tr>
<tr>
<td style="text-align:center">24 (16M)</td>
<td style="text-align:center">786</td>
<td style="text-align:center">789</td>
<td style="text-align:center">792</td>
<td style="text-align:center">795</td>
</tr>
</tbody>
</table>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS-7-Minimal/">CentOS 7 Minimal</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Integration/">Integration</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ruby/">Ruby</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ServerSpec/">ServerSpec</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Testinfra/">Testinfra</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ZAP/">ZAP</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-Qucik_Start_For_Integrating_ZAP_into_CI" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/06/Qucik_Start_For_Integrating_ZAP_into_CI/">Quick start for integrating ZAP into CI</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/09/06/Qucik_Start_For_Integrating_ZAP_into_CI/" class="article-date">
  <time datetime="2017-09-05T14:00:00.000Z" itemprop="datePublished">2017-09-06</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Testing/">Testing</a>
  </div>


      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="OWASP-ZAP-is-widely-used-security-testing-tool-and-it’s-open-sourced-Let’s-see-how-we-can-integrate-it-with-our-automated-functionality-testing-in-CI"><a href="#OWASP-ZAP-is-widely-used-security-testing-tool-and-it’s-open-sourced-Let’s-see-how-we-can-integrate-it-with-our-automated-functionality-testing-in-CI" class="headerlink" title="OWASP ZAP is widely used security testing tool and it’s open sourced. Let’s see how we can integrate it with our automated functionality testing in CI."></a>OWASP ZAP is widely used security testing tool and it’s open sourced. Let’s see how we can integrate it with our automated functionality testing in CI.</h5><h3 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite:"></a>Prerequisite:</h3><p>  RVM, Ruby and rubygems are installed.</p>
<h3 id="Get-Started"><a href="#Get-Started" class="headerlink" title="Get Started:"></a>Get Started:</h3><ol>
<li><p>Download ZAP from <a href="https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project" target="_blank" rel="external">OWASP_Zed_Attack_Proxy_Project</a> and install it.</p>
</li>
<li><p>Install Selenium-WebDriver, IO, Rest-Client and RSpec gems:</p>
<p>1) Install Selenium-WebDriver</p>
<p><code>gem install selenium-webdriver</code></p>
<p>2) Install IO</p>
<p><code>gem install io</code></p>
<p>3) Install Rest-Client</p>
<p><code>gem install rest-client</code></p>
<p>4) Install RSpec</p>
<p><code>gem install rspec</code></p>
</li>
<li><p>Write and run a basic Selenium-WebDriver script using Ruby. The script is the same as in my previous Gitbook <a href="http://hy1984427.github.io/BDD-with-PageObject/SimpleWebDriverTestByRuby/SimpleWebDriverTestByRuby.html">BDD with PageObject</a>.</p>
<p>The script will be like following:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'selenium-webdriver'</span></div><div class="line"></div><div class="line">driver = Selenium::WebDriver.<span class="keyword">for</span> <span class="symbol">:firefox</span></div><div class="line"></div><div class="line">driver.get <span class="string">"http://www.google.com"</span></div><div class="line">element = driver.find_element <span class="symbol">:name</span> =&gt; <span class="string">"q"</span></div><div class="line">element.send_keys <span class="string">"Cheese!"</span></div><div class="line">element.submit</div><div class="line">p <span class="string">"Page title is <span class="subst">#&#123;driver.title&#125;</span>"</span></div><div class="line">wait = Selenium::WebDriver::Wait.new(<span class="symbol">:timeout</span> =&gt; <span class="number">10</span>)</div><div class="line">wait.<span class="keyword">until</span> &#123; driver.title.downcase.start_with? <span class="string">"cheese!"</span> &#125;</div><div class="line">p <span class="string">"Page title is <span class="subst">#&#123;driver.title&#125;</span>"</span></div><div class="line"></div><div class="line">driver.quit</div></pre></td></tr></table></figure>
<p>You can reference the script  <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/simple_script.rb" target="_blank" rel="external">here</a>.</p>
<p>Using <code>ruby simple_script.rb</code> to run and check the result.</p>
</li>
<li><p>Add steps to start ZAP and proxy the testing script using ZAP.</p>
<p>The script will become as following:</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">require 'selenium-webdriver'</div><div class="line"><span class="addition">+ require 'io/console'</span></div><div class="line"></div><div class="line"><span class="addition">+ system("pkill java") #To close any existing ZAP instance.</span></div><div class="line"><span class="addition">+ system("pkill firefox") #To close any existing Firefox instance.</span></div><div class="line"><span class="addition">+ IO.popen("/Applications/ZAP\\ 2.6.0.app/Contents/Java/zap.sh -daemon -config api.disablekey=true") #The path here should be the zap.sh path under ZAP package/folder on your machine; with the option -config api.disablekey=true, ZAP will not check the apikey, which is enable by default after ZAP 2.6.0</span></div><div class="line"><span class="addition">+ p "OWASP ZAP launch completed"</span></div><div class="line"><span class="addition">+ sleep 5 #To let ZAP start completely</span></div><div class="line"></div><div class="line"><span class="addition">+ profile = Selenium::WebDriver::Firefox::Profile.new</span></div><div class="line"><span class="addition">+ proxy = Selenium::WebDriver::Proxy.new(http: "localhost:8080") #Normally ZAP will listening at port 8080, if not, please change it to the actual port ZAP is listening</span></div><div class="line"><span class="addition">+ profile.proxy = proxy</span></div><div class="line"><span class="addition">+ options = Selenium::WebDriver::Firefox::Options.new(profile: profile)</span></div><div class="line"><span class="addition">+ driver = Selenium::WebDriver.for :firefox, options: options</span></div><div class="line"><span class="deletion">- driver = Selenium::WebDriver.for :firefox</span></div><div class="line"></div><div class="line">driver.get "http://www.google.com"</div><div class="line">element = driver.find_element :name =&gt; "q"</div><div class="line">element.send_keys "Cheese!"</div><div class="line">element.submit</div><div class="line">p "Page title is #&#123;driver.title&#125;"</div><div class="line">wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)</div><div class="line">wait.until &#123; driver.title.downcase.start_with? "cheese!" &#125;</div><div class="line">p "Page title is #&#123;driver.title&#125;"</div><div class="line"></div><div class="line">driver.quit</div></pre></td></tr></table></figure>
<p>You can reference the script  <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/add_zap_start.rb" target="_blank" rel="external">here</a>.</p>
<p>Using <code>ruby add_zap_start.rb</code> to run and check the result.</p>
</li>
<li><p>Read the test results from ZAP.</p>
<p>The script will become as following:</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">require 'selenium-webdriver'</div><div class="line">require 'io/console'</div><div class="line"><span class="addition">+ require 'rest-client'</span></div><div class="line"></div><div class="line">system("pkill java") #To close any existing ZAP instance.</div><div class="line">system("pkill firefox") #To close any existing Firefox instance.</div><div class="line">IO.popen("/Applications/ZAP\\ 2.6.0.app/Contents/Java/zap.sh -daemon -config api.disablekey=true") #The path here should be the zap.sh path under ZAP package/folder on your machine; with the option -config api.disablekey=true, ZAP will not check the apikey, which is enable by default after ZAP 2.6.0</div><div class="line">p "OWASP ZAP launch completed"</div><div class="line">sleep 5 #To let ZAP start completely</div><div class="line"></div><div class="line">profile = Selenium::WebDriver::Firefox::Profile.new</div><div class="line">proxy = Selenium::WebDriver::Proxy.new(http: "localhost:8080") #Normally ZAP will listening at port 8080, if not, please change it to the actual port ZAP is listening</div><div class="line">profile.proxy = proxy</div><div class="line">options = Selenium::WebDriver::Firefox::Options.new(profile: profile)</div><div class="line">driver = Selenium::WebDriver.for :firefox, options: options</div><div class="line"></div><div class="line">driver.get "http://www.google.com"</div><div class="line">element = driver.find_element :name =&gt; "q"</div><div class="line">element.send_keys "Cheese!"</div><div class="line">element.submit</div><div class="line">p "Page title is #&#123;driver.title&#125;"</div><div class="line">wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)</div><div class="line">wait.until &#123; driver.title.downcase.start_with? "cheese!" &#125;</div><div class="line">p "Page title is #&#123;driver.title&#125;"</div><div class="line"></div><div class="line"><span class="addition">+ JSON.parse RestClient.get "http://localhost:8080/json/core/view/alerts" #To trigger ZAP to raise alerts if any</span></div><div class="line"><span class="addition">+ sleep 5 #Give ZAP some time to process</span></div><div class="line"><span class="addition">+ response = JSON.parse RestClient.get "http://localhost:8080/json/core/view/alerts", params: &#123; zapapiformat: 'JSON', baseurl: "http://clients1.google.com", start: 1 &#125; #Get the alerts ZAP found, please note the baseurl will exact match from the beginning</span></div><div class="line"></div><div class="line">driver.quit</div><div class="line"><span class="addition">+ RestClient.get "http://localhost:8080/JSON/core/action/shutdown" #Close ZAP instance</span></div></pre></td></tr></table></figure>
<p>You can reference the script  <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/read_zap_result.rb" target="_blank" rel="external">here</a>.</p>
<p>Using <code>ruby read_zap_result.rb</code> to run and check the result.</p>
</li>
<li><p>Set up assertions to check the Low Risks.</p>
<p>The script will become as following:</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">require 'selenium-webdriver'</div><div class="line">require 'io/console'</div><div class="line">require 'rest-client'</div><div class="line"><span class="addition">+ require 'rspec/expectations'</span></div><div class="line"><span class="addition">+ include RSpec::Matchers</span></div><div class="line"></div><div class="line">system("pkill java") #To close any existing ZAP instance.</div><div class="line">system("pkill firefox") #To close any existing Firefox instance.</div><div class="line">IO.popen("/Applications/ZAP\\ 2.6.0.app/Contents/Java/zap.sh -daemon -config api.disablekey=true") #The path here should be the zap.sh path under ZAP package/folder on your machine; with the option -config api.disablekey=true, ZAP will not check the apikey, which is enable by default after ZAP 2.6.0</div><div class="line">p "OWASP ZAP launch completed"</div><div class="line">sleep 5 #To let ZAP start completely</div><div class="line"></div><div class="line">profile = Selenium::WebDriver::Firefox::Profile.new</div><div class="line">proxy = Selenium::WebDriver::Proxy.new(http: "localhost:8080") #Normally ZAP will listening at port 8080, if not, please change it to the actual port ZAP is listening</div><div class="line">profile.proxy = proxy</div><div class="line">options = Selenium::WebDriver::Firefox::Options.new(profile: profile)</div><div class="line">driver = Selenium::WebDriver.for :firefox, options: options</div><div class="line"></div><div class="line">driver.get "http://www.google.com"</div><div class="line">element = driver.find_element :name =&gt; "q"</div><div class="line">element.send_keys "Cheese!"</div><div class="line">element.submit</div><div class="line">p "Page title is #&#123;driver.title&#125;"</div><div class="line">wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)</div><div class="line">wait.until &#123; driver.title.downcase.start_with? "cheese!" &#125;</div><div class="line">p "Page title is #&#123;driver.title&#125;"</div><div class="line"></div><div class="line">JSON.parse RestClient.get "http://localhost:8080/json/core/view/alerts" #To trigger ZAP to raise alerts if any</div><div class="line">sleep 5 #Give ZAP some time to process</div><div class="line">response = JSON.parse RestClient.get "http://localhost:8080/json/core/view/alerts", params: &#123; zapapiformat: 'JSON', baseurl: "http://clients1.google.com", start: 1 &#125; #Get the alerts ZAP found</div><div class="line"><span class="addition">+ response['alerts'].each &#123;|x| p "#&#123;x['alert']&#125; risk level: #&#123;x['risk']&#125;"&#125; #Extract the risks found</span></div><div class="line"><span class="addition">+ events = response['alerts']</span></div><div class="line"><span class="addition">+ low_count = events.select&#123;|x| x['risk'] == 'Low'&#125;.size #Count the Low Risks</span></div><div class="line"><span class="addition">+ expect(low_count).to equal(1) #Expecxt only one Low Risk</span></div><div class="line"></div><div class="line">driver.quit</div><div class="line">RestClient.get "http://localhost:8080/JSON/core/action/shutdown" #Close ZAP instance</div></pre></td></tr></table></figure>
<p>You can reference the script  <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/add_assertions_to_check_zap_result.rb" target="_blank" rel="external">here</a>.</p>
<p>Using <code>ruby add_assertions_to_check_zap_result.rb</code> to run and check the result.</p>
</li>
<li><p>Now we can trigger this script in any CI using command above.</p>
</li>
</ol>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CI/">CI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Quick-Start/">Quick-Start</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ruby/">Ruby</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Security/">Security</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ZAP/">ZAP</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-Qucik_Start_For_ServerSpec_and_TestInfra_also_comparison_of_them" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/09/01/Qucik_Start_For_ServerSpec_and_TestInfra_also_comparison_of_them/">Quick start for ServerSpec and Testinfra, also comparison of them</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/09/01/Qucik_Start_For_ServerSpec_and_TestInfra_also_comparison_of_them/" class="article-date">
  <time datetime="2017-08-31T14:00:00.000Z" itemprop="datePublished">2017-09-01</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Testing/">Testing</a>
  </div>


      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="ServerSpec-is-to-check-servers-are-configured-correctly-through-their-actual-state-using-RSpec-tests-Testinfra-is-kind-of-a-Serverspec-equivalent-in-Python-and-based-on-Pytest"><a href="#ServerSpec-is-to-check-servers-are-configured-correctly-through-their-actual-state-using-RSpec-tests-Testinfra-is-kind-of-a-Serverspec-equivalent-in-Python-and-based-on-Pytest" class="headerlink" title="ServerSpec is to check servers are configured correctly through their actual state using RSpec tests. Testinfra is kind of a Serverspec equivalent in Python and based on Pytest."></a>ServerSpec is to check servers are configured correctly through their actual state using RSpec tests. Testinfra is kind of a Serverspec equivalent in Python and based on Pytest.</h5><h3 id="Prerequisite"><a href="#Prerequisite" class="headerlink" title="Prerequisite:"></a>Prerequisite:</h3><ol>
<li><p>RVM, Ruby and rubygems are installed.</p>
</li>
<li><p>Python and pip are installed.</p>
</li>
<li><p>We would expect to run Testinfra and ServerSpec against the server rather than our local machine, so we may need to tweak a little bit by connecting the server with ssh key.</p>
<ul>
<li>Generate ssh key: <code>ssh-keygen -t rsa</code></li>
<li>Copy ssh public key to server: <code>ssh-copy-id -i ~/.ssh/id_rsa.pub username@server</code></li>
<li><p>Add following lines to ~/.ssh/config.</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Host<span class="built_in"> server</span></div><div class="line"> <span class="built_in"> User </span>username</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="Get-Started-for-ServerSpec"><a href="#Get-Started-for-ServerSpec" class="headerlink" title="Get Started for ServerSpec:"></a>Get Started for ServerSpec:</h3><ol>
<li><p>Install ServerSpec.</p>
<p><code>gem install serverspec</code></p>
</li>
<li><p>Initial ServerSpec folder with basic settings. Please note the server will be set in this step.</p>
<p><code>serverspec-init</code></p>
</li>
<li><p>Write and run the ServerSpec script according to its <a href="http://serverspec.org/resource_types.html" target="_blank" rel="external">API document</a>.</p>
<p>You can reference the script  <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/ServerSpec.zip" target="_blank" rel="external">here</a>.</p>
<p>Using <code>rake spec</code> under the test folder to run and check the result.</p>
</li>
<li><p>To run specific test rather than the entire test suite.</p>
<p> Using <code>rake spec spec/host_server/sample_spec.rb</code> under the test folder to run and check the result.</p>
</li>
<li><p>To generate a html file as the test result, we can add <code>t.rspec_opts = &#39;--format html --out reports/rspec_results.html&#39;</code> in the Rakefile when new the Rake task. e.g.</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">require 'rake'</div><div class="line">require 'rspec/core/rake_task'</div><div class="line"></div><div class="line">task :spec    =&gt; 'spec:all'</div><div class="line">task :default =&gt; :spec</div><div class="line"></div><div class="line">namespace :spec do</div><div class="line">  targets = []</div><div class="line">  Dir.glob('./spec/*').each do |dir|</div><div class="line">    next unless File.directory?(dir)</div><div class="line">    target = File.basename(dir)</div><div class="line">    target = "_#&#123;target&#125;" if target == "default"</div><div class="line">    targets &lt;&lt; target</div><div class="line">  end</div><div class="line"></div><div class="line">  task :all     =&gt; targets</div><div class="line">  task :default =&gt; :all</div><div class="line"></div><div class="line">  targets.each do |target|</div><div class="line">    original_target = target == "_default" ? target[1..-1] : target</div><div class="line">    desc "Run serverspec tests to #&#123;original_target&#125;"</div><div class="line">    RSpec::Core::RakeTask.new(target.to_sym) do |t|</div><div class="line">      ENV['TARGET_HOST'] = original_target</div><div class="line"><span class="addition">+     t.rspec_opts = '--format html --out reports/test_results.html'</span></div><div class="line">    end</div><div class="line">  end</div><div class="line"></div><div class="line">end</div></pre></td></tr></table></figure>
<p>And it will generate the test result named “test_results.html” under “reports” folder every time the test runs.</p>
</li>
</ol>
<h3 id="Get-Started-for-Testinfra"><a href="#Get-Started-for-Testinfra" class="headerlink" title="Get Started for Testinfra:"></a>Get Started for Testinfra:</h3><ol>
<li><p>Install Testinfra and Paramiko.</p>
<p><code>pip install testinfra</code><br><code>pip install paramiko</code></p>
</li>
<li><p>Write and run the Testinfra script according to its <a href="http://testinfra.readthedocs.io/en/latest/modules.html" target="_blank" rel="external">API document</a>.</p>
<p>You can reference the script  <a href="https://raw.githubusercontent.com/hy1984427/hy1984427.github.io/master/documents/testinfra_test.py" target="_blank" rel="external">here</a>.</p>
<p>Using <code>testinfra testinfra_test.py</code> to run and check the result.</p>
</li>
<li><p>Some useful arguments we can use to make the test result more clear.</p>
<p>Instead of using <code>testinfra testinfra_test.py</code> directly, we can add some arguments, such as <code>-q</code>, <code>-s</code>, <code>--disable-warnings</code> and <code>--junit-xml</code>.</p>
<ul>
<li>The argument <code>-q</code> will run Testinfra in quiet mode, with less info exposed</li>
<li>The argument <code>-s</code> will let Testinfra capture No pre-test info</li>
<li>The argument <code>--disable-warnings</code> will disable warnings during Testinfra runs</li>
<li>The argument <code>--junit-xml</code> will export Testinfra test result into a xml file</li>
</ul>
<p>After adding those arguments, the command should be look like <code>testinfra -q -s --disable-warnings testinfra_test.py --junit-xml=report.xml</code></p>
</li>
<li><p>Now we can run Testinfra against the server using <code>testinfra -q -s --disable-warnings --ssh-config=/Path/to/ssh/config --hosts=server testinfra_test.py --junit-xml=report.xml</code>.</p>
</li>
</ol>
<h3 id="Comparison-between-ServerSpec-and-Testinfra"><a href="#Comparison-between-ServerSpec-and-Testinfra" class="headerlink" title="Comparison between ServerSpec and Testinfra:"></a>Comparison between ServerSpec and Testinfra:</h3><h5 id="Advantages-of-ServerSpec"><a href="#Advantages-of-ServerSpec" class="headerlink" title="Advantages of ServerSpec"></a>Advantages of ServerSpec</h5><ul>
<li><p>More documents and community support (compared to Testinfra);</p>
</li>
<li><p>The scripts, test results and reports are more readable (Testinfra is based on Pytest, and can only export report to XML not JSON);</p>
</li>
<li><p>Although Testinfra support “sysctl” and it runs successfully on the server, the command in script can’t run, and prompts error “bash: sysctl: command not found”; may also occurs to other commands/resources (potential risk);</p>
</li>
<li><p>ServerSpec can support more resources and attributes for resources than Testinfra.</p>
</li>
</ul>
<h5 id="Advantages-of-Testinfra"><a href="#Advantages-of-Testinfra" class="headerlink" title="Advantages of Testinfra"></a>Advantages of Testinfra</h5><ul>
<li><p>Can support most common resources, such as Docker, File, Group, Service, Socket and etc (equivalent to ServerSpec);</p>
</li>
<li><p>Can show the actual value when validating the permission but failed, so the debug will be quicker.</p>
</li>
</ul>
<h4 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h4><p>  If you can only choose Python as your programming language, you have to use Testinfra; otherwise, I recommend ServerSpec because of the benefits it can bring.</p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Comparison/">Comparison</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Infrastructure-Testing/">Infrastructure Testing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Quick-Start/">Quick-Start</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ruby/">Ruby</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ServerSpec/">ServerSpec</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Testinfra/">Testinfra</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <article id="post-Qucik_Start_For_Docker" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/18/Qucik_Start_For_Docker/">Quick Start for Docker</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2017/07/18/Qucik_Start_For_Docker/" class="article-date">
  <time datetime="2017-07-17T14:00:00.000Z" itemprop="datePublished">2017-07-18</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/Testing/">Testing</a>
  </div>


      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><p>  Download from <a href="https://www.docker.com/docker-mac" target="_blank" rel="external">https://www.docker.com/docker-mac</a></p>
<h3 id="Register-a-Docker-account"><a href="#Register-a-Docker-account" class="headerlink" title="Register a Docker account"></a>Register a Docker account</h3><p>  Register on <a href="https://www.docker.com/" target="_blank" rel="external">https://www.docker.com/</a></p>
<h3 id="Check-Docker-availability"><a href="#Check-Docker-availability" class="headerlink" title="Check Docker availability"></a>Check Docker availability</h3><p>  Run following commands in Terminal<br>  <code>docker -v</code><br>  <code>docker -info</code></p>
<h3 id="Pull-a-Docker-image-e-g-“Ruby”"><a href="#Pull-a-Docker-image-e-g-“Ruby”" class="headerlink" title="Pull a Docker image. e.g. “Ruby”"></a>Pull a Docker image. e.g. “Ruby”</h3><p>  <code>docker pull ruby</code></p>
<h3 id="Check-the-ruby-version-in-Docker-image-“Ruby”"><a href="#Check-the-ruby-version-in-Docker-image-“Ruby”" class="headerlink" title="Check the ruby version in Docker image “Ruby”"></a>Check the ruby version in Docker image “Ruby”</h3><p>  <code>docker run ruby ruby -v</code></p>
<h3 id="Run-Docker-image-at-background-and-with-an-alias-e-g-“trail”"><a href="#Run-Docker-image-at-background-and-with-an-alias-e-g-“trail”" class="headerlink" title="Run Docker image at background and with an alias, e.g. “trail”"></a>Run Docker image at background and with an alias, e.g. “trail”</h3><p>  <code>docker run -idt --name=trial ruby</code></p>
<h4 id="Check-all-the-running-Docker-images"><a href="#Check-all-the-running-Docker-images" class="headerlink" title="Check all the running Docker images"></a>Check all the running Docker images</h4><p>  <code>docker ps</code></p>
<h4 id="Attach-to-the-running-Docker-image-and-execute-commands-in-it"><a href="#Attach-to-the-running-Docker-image-and-execute-commands-in-it" class="headerlink" title="Attach to the running Docker image and execute commands in it"></a>Attach to the running Docker image and execute commands in it</h4><p>  You can use <code>docker attach trial</code><br>  But it’s better to use <code>docker exec -i -t trial sh</code></p>
<p><strong>Reference</strong><br><a href="https://yeasy.gitbooks.io/docker_practice/" target="_blank" rel="external">Docker — 从入门到实践</a></p>

      
    </div>
    
    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Quick-Start/">Quick-Start</a></li></ul>

      </footer>
    
  </div>
  
</article>








    
      <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
      </nav>
    </section>
    
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Huang Yong&nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>

    

<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
  </div>
</body>
</html>
